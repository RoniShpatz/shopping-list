{% extends "base.html" %}
{% block title %}Home{% endblock %}
{%block main%}

<h1>Hello {{ name|capitalize }}, what would you like to do? </h1>
<div>
    <div>{%for name in shopping_list%}
        <p> {{name}}</p>
        {% endfor %}
    </div>
    <div>
        {% for list_name, items  in shopping_list.items() %}
        <div>
            <h2 class="list_name">{{list_name}}</h2>
            {% set categories = items | map(attribute='category') | unique %}

           
            {% for category in categories %}
            <div>
                <h4>{{ category }}</h4> 
                <ul>
           
                    {% for item in items if item.category == category %}
                        <li>
                            {{ item.quantity }} {{ item.name }}
                            {% if item.notes %}
                                ({{ item.notes }})
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% endfor %}
            </div>
        </div>
     
        <form action="/home_edit" method="POST" >
            <input name="shopping_list_name"  class="shopping_list_name_hidden" value="">
            <input  name="quantity" placeholder="000" type="number" maxlength="4">
            <label for="products"></label>
            <input name="product" placeholder="Add product" list="products">
            <datalist id="products">
                {% for id, product in products_list %}
                <option value="{{product}}">{{product}}</option>
                {% endfor %}
                </datalist>
            <input name="notes" placeholder="Add notes">
            <button type="submit">✔</button>
            <button type="reset">✖</button>
        </form>

    </div>
    <a href="{{active_shopping}}">Start Shopping</a>
    <!-- <a href="{{add_products}}">Add products</a> -->
    <div>
        {% endfor %}
    </div>
    <div>

 
    </div>


</div>




<script src="../static/js/home.js"></script>
{%endblock%}